<h2><a href="https://www.postgresql.org/docs/14/ddl-constraints.html#DDL-CONSTRAINTS-FK" target="_blank"><code>REFERÊNCIAS</code></ a>.</h2><p>Chaves estrangeiras são colunas em uma tabela que estavam relacionadas à chave primária (ou mesmo chave candidata) de outra tabela.</p><p>Ao criar a tabela, teremos que indicar, de alguma forma, qual é a chave estrangeira. Faremos isso "referenciando" a tabela e os atributos de onde ela veio.</p><p>Imagine que criamos a tabela <code>MATCHES</code> com o seguinte comando:</p><blockquote> < pre><code>CREATE TABLE MATCHES (<br /> COD_MATCH INTEGER PRIMARY KEY,<br /> MATCH_DATE DATE<br />);</code></pre></blockquote><p>Na nossa tabela < code >USERS</code> teremos uma chave estrangeira da tabela <code>MATCHES</code> que será sua <code>COD_MATCH</code>, portanto teremos que nos referir a ela:</ p>< blockquote><pre><code>CREATE TABLE USERS (<br /> COD_MATCH INTEGER<br /> CONSTRAINT Cod_Match_FK<br /> REFERENCES MATCHES(COD_MATCH)<br />);</code></pre> </blockquote ><p>Se o campo ao qual você se refere é a chave primária da sua tabela, você não precisa indicar o nome do campo:</p><blockquote><pre><code>CREATE TABLE USERS ( <br /> COD_MATCH INTEGER< br /> CONSTRAINT Cod_Match_FK<br /> REFERENCES MATCHES<br />);</code></pre></blockquote><p>Para a relação Para adicionar campos, precisamos que os dados do campo que é uma chave estrangeira em uma tabela (que chamaremos de secundária) tenham sido previamente incluídos em sua tabela de origem onde é uma chave primária ou candidata. Em nosso exemplo, qualquer <code>COD_MATCH</code> que incluímos na tabela <code>USERS</code>, deve estar previamente na tabela de origem, ou seja, no <code>MATCHES</code > tabela. código>. <strong>Isso é chamado de integridade referencial.</strong></p><p>Isso pode criar alguns erros, pois pode ocorrer o seguinte:</p><ul><li>Se nos referirmos a uma tabela que é não criado: o DBMS procurará a tabela referenciada e, ao não encontrá-la, falhará. Isso é resolvido criando primeiro as tabelas que não possuem chaves estrangeiras.</li><li>Se quisermos excluir as tabelas, teremos que fazer o contrário, excluiremos primeiro as tabelas que possuem chaves estrangeiras.</li> li></ul> <h3>Exercício:</h3><p>Suponha que tenhamos que armazenar dados de <code>MÓDULOS</code>, de acordo com a seguinte definição:</p><blockquote><pre> <code>CREATE TABLE MODULES ( <br /> CODE INTEGER PRIMARY KEY,<br /> NAME VARCHAR(100),<br /> FACULTY CHAR(3)<br />);</code></pre>< /blockquote><p>O ensino de cada um destes <code>MÓDULOS</code> corresponde a uma das <code>FACULDADE</code>, cujos dados são armazenados na seguinte tabela:</p><blockquote> <pre><code> CREATE TABLE FACULTIES (<br /> COD_FACULTY CHAR(3) PRIMARY KEY,<br /> NAME VARCHAR(100)<br />);</code></pre></blockquote>< p>Crie as tabelas e relacione-as através de uma chave estrangeira.</p>